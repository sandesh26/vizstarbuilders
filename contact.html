<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us | Vizstar Builders</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* Page-specific styles to match the provided mock */
        body { background: #fff; color: #222; }
        .hero-contacts {
            position: relative;
            height: 420px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
        }
        .hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, rgba(0,0,0,0.25) 0%, rgba(0,0,0,0.35) 100%);
        }
        .hero-inner {
            position: relative;
            text-align: center;
            z-index: 3;
        }
        .hero-title { font-size: 40px; letter-spacing: 2px; font-weight:700; margin-bottom:6px; }
        .hero-breadcrumb { font-size: 12px; opacity: 0.85; }

        /* Contact band across hero */
        .contact-band {
            position: relative;
            margin: -70px auto 40px;
            max-width: 1100px;
            /* alpha should be between 0 and 1 — use 0.95 for a slightly translucent band */
            background: rgba(30,30,30,0.95);
            color: #fff;
            display: flex;
            gap: 1px;
            box-shadow: 0 6px 30px rgba(0,0,0,0.2);
            z-index: 4;
            border-radius: 6px;
            overflow: hidden;
        }
        .contact-band .band-item { flex:1; padding:20px 22px; text-align:center; z-index:100; }
        .band-item i { font-size: 26px; margin-bottom:10px; display:block; color:#d7c08a; }
        .band-item h4 { margin:6px 0 6px; font-size:14px; text-transform:uppercase; letter-spacing:1px; }
        .band-item p { font-size:13px; opacity:0.9; }

        main { max-width:1200px; margin: 20px auto 80px; padding: 0 20px; }

        .drop-line-title { text-align:center; font-weight:700; margin-top:18px; margin-bottom:8px; }
        .drop-sub { text-align:center; color:#666; margin-bottom:30px; }

        .form-and-gallery { display:flex; gap:30px; align-items:flex-start; }
        .contact-form-wrap { flex:1; background:#fff; border:1px solid #eee; padding:22px; box-shadow:0 6px 18px rgba(0,0,0,0.04); }
        .contact-form input, .contact-form textarea { width:100%; padding:12px; margin-bottom:12px; border:1px solid #ddd; }
        .contact-form button { padding:10px 18px; background:#222; color:#fff; border:0; cursor:pointer; }

        .gallery-block { width:420px; display:flex; flex-direction:column; gap:18px; }
        .gallery-photos { display:flex; gap:18px; }
        .gallery-photos img { width:100%; display:block; object-fit:cover; }
        .gallery-photos .col { flex:1; }
        .how-text { background:#fff; border:1px solid #eee; padding:18px; color:#333; }

        .map-wrap { margin-top:40px; border-radius:2px; overflow:hidden; box-shadow:0 6px 24px rgba(0,0,0,0.08); }

        @media (max-width:900px){
            .form-and-gallery { flex-direction:column; }
            .gallery-block { width:100%; }
            .contact-band { margin: -40px 16px 24px; }
            .hero-contacts{height:320px}
            .hero-title{font-size:28px}
        }

        /* Narrow mobile adjustments */
        @media (max-width:600px) {
            .contact-band {
                /* reduce the negative overlap so the band doesn't cover too much of the hero */
                margin: -28px 12px 18px;
                flex-direction: column;
                gap: 0;
                border-radius: 6px;
                align-items: center;
            }
            .contact-band .band-item {
                padding: 14px 12px;
                text-align: center;
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            .band-item i { font-size: 22px; margin-bottom:8px; }
            .band-item h4 { font-size:13px; }
            .band-item p { font-size:13px; word-break:break-word; }
            /* Slightly reduce hero height on very small screens to keep layout compact */
            .hero-contacts { height: 260px; }
        }
    </style>
</head>

<body>
    <!-- Header placeholder -->
    <div id="header-placeholder"></div>

    <section class="hero-contacts" style="background-image:url('assets/images/projects/honda/honda-interior-34.jpg')">
        <div class="hero-overlay"></div>
        <div class="hero-inner">
            <div class="hero-title">CONTACT US</div>
            <div class="hero-breadcrumb">Home &nbsp;/&nbsp; Contact Us</div>
        </div>
    </section>

    <div class="contact-band" role="region" aria-label="Contact highlights">
        <div class="band-item">
            <i class="fas fa-envelope"></i>
            <h4>Send Email</h4>
            <p>contact@vizstarbuilders.com</p>
        </div>
        <div class="band-item">
            <i class="fas fa-phone"></i>
            <h4>Call Us</h4>
            <p>+91-98231 72025</p>
        </div>
        <div class="band-item">
            <i class="fas fa-map-marker-alt"></i>
            <h4>Visit Us</h4>
            <p>Office No 240, Second Floor<br>Gera Star - Patto, Panjim<br>Goa - 403001</p>
        </div>
    </div>

    <main>
        <div class="drop-line-title">LET'S BUILD SOMETHING GREAT TOGETHER</div>
        </br>
        <div class="form-and-gallery">
            <div class="contact-form-wrap">
                <!-- Form posts to contact.php which sends email and redirects back with status -->
                <form class="contact-form" autocomplete="off" action="/contact.php" method="post">
                    <div style="display:flex; gap:8px;">
                        <input type="text" name="name" placeholder="Your Name*" required>
                        <input type="email" name="email" placeholder="Your Email*" required>
                    </div>
                    <div style="display:flex; gap:8px;">
                        <input type="tel" name="phone" placeholder="Your Phone*" required inputmode="numeric" pattern="[0-9]{10}" maxlength="10" title="Please enter exactly 10 digits" oninput="this.value = this.value.replace(/\D/g, '').slice(0, 10);">
                        <input type="text" name="subject" placeholder="Subject (optional)">
                    </div>
                    <textarea name="message" rows="6" placeholder="Your Message" required></textarea>
                    <div style="text-align:center; margin-top:8px;"><button type="submit">SEND MESSAGE</button></div>
                </form>
            </div>
        </div>

        <div class="map-wrap">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d7689.625353006377!2d73.833284!3d15.494505000000002!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bbfc1870bd62f33%3A0x6f779ece0ea56530!2sGera&#39;s%20Imperium%20Star!5e0!3m2!1sen!2sin!4v1758826154572!5m2!1sen!2sin"
                width="100%" height="420" style="border:0;" allowfullscreen="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </main>

    <!-- Slide Menu Component Placeholder -->
    <div id="slide-menu-placeholder"></div>
    <!-- Footer placeholder -->
    <div id="footer-placeholder"></div>

    <script>
        // Handle showing messages and submit the contact form via AJAX (no page reload)
        document.addEventListener('DOMContentLoaded', function(){
            function showContactMessage(type, text) {
                let msg = document.getElementById('contact-result');
                if (!msg) {
                    msg = document.createElement('div');
                    msg.id = 'contact-result';
                    msg.style.margin = '12px 0';
                    msg.style.padding = '12px';
                    msg.style.borderRadius = '6px';
                }
                if (type === 'success') {
                    msg.style.background = '#e6ffef';
                    msg.style.color = '#065f46';
                } else {
                    msg.style.background = '#fff1f2';
                    msg.style.color = '#7f1d1d';
                }
                msg.textContent = text;
                msg.style.display = 'block';
                const wrap = document.querySelector('.contact-form-wrap');
                if (wrap) wrap.insertBefore(msg, wrap.firstChild);
            }

            // If the page was opened with query params (fallback for non-AJAX submissions), show message
            const params = new URLSearchParams(location.search);
            if (params.get('sent') === '1') {
                showContactMessage('success', 'Thank you — your message was sent successfully.');
            } else if (params.get('error') === '1') {
                showContactMessage('error', 'Sorry — we could not send your message. Please try again later.');
            }

            // Intercept form submit and POST via fetch so page does not reload
            const form = document.querySelector('.contact-form');
            if (!form) return;

            form.addEventListener('submit', async function (e) {
                e.preventDefault();
                const submitBtn = form.querySelector('button[type=submit]');
                let originalBtnText = '';
                if (submitBtn) {
                    originalBtnText = submitBtn.textContent;
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Sending...';
                }

                try {
                    const resp = await fetch(form.action, {
                        method: (form.method || 'POST').toUpperCase(),
                        body: new FormData(form),
                        credentials: 'same-origin',
                        headers: {
                            'X-Requested-With': 'XMLHttpRequest',
                            'Accept': 'application/json,text/html'
                        }
                    });

                    const contentType = (resp.headers.get('content-type') || '').toLowerCase();
                    if (contentType.includes('application/json')) {
                        const json = await resp.json();
                        if (json && (json.sent == 1 || json.success === true)) {
                            showContactMessage('success', json.message || 'Thank you — your message was sent successfully.');
                            form.reset();
                        } else {
                            showContactMessage('error', json.message || 'Sorry — we could not send your message. Please try again later.');
                        }
                    } else {
                        // If the server redirected with query params, resp.url will include them
                        if (resp.url && resp.url.indexOf('sent=1') !== -1) {
                            showContactMessage('success', 'Thank you — your message was sent successfully.');
                            form.reset();
                        } else if (resp.url && resp.url.indexOf('error=1') !== -1) {
                            showContactMessage('error', 'Sorry — we could not send your message. Please try again later.');
                        } else if (resp.ok) {
                            // Try to inspect body for success markers
                            const text = await resp.text();
                            if (text.indexOf('Thank you') !== -1 || text.indexOf('sent successfully') !== -1) {
                                showContactMessage('success', 'Thank you — your message was sent successfully.');
                                form.reset();
                            } else {
                                showContactMessage('error', 'Sorry — we could not send your message. Please try again later.');
                            }
                        } else {
                            showContactMessage('error', 'Sorry — we could not send your message. Please try again later.');
                        }
                    }
                } catch (err) {
                    console.error('Contact form submission failed:', err);
                    showContactMessage('error', 'An error occurred while sending — check your internet connection and try again.');
                } finally {
                    if (submitBtn) {
                        submitBtn.disabled = false;
                        submitBtn.textContent = originalBtnText;
                    }
                }
            });
        });
    </script>
    <script src="assets/main.js"></script>
</body>

</html>
